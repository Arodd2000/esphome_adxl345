globals:
  - id: profile_general_temperature
    type: float
    restore_value: true
    initial_value: "50.0"

select:
  - platform: template
    id: profile
    name: "${name_verbose} Profile"
    optimistic: true
    update_interval: never
    options:
      - General
      - Coffee
      - Black Tea
      - Green Tea
    on_value:
      then:
        - select.set:
            id: kettle_mode
            option: standby
        - script.execute: timer_stop

        - if:
            condition:
              lambda: return !x.compare("General");
            then:
              - lambda: |-
                  auto call = id(temperature_pid).make_call();
                  call.set_target_temperature(id(profile_general_temperature));
                  call.perform();
              - number.set:
                  id: timer_default_value
                  value: 0.0
              - select.set:
                  id: timer_direction
                  option: Count Up

        - if:
            condition:
              lambda: return !x.compare("Coffee");
            then:
              - climate.control:
                  id: temperature_pid
                  target_temperature: 96.0
              - number.set:
                  id: timer_default_value
                  value: 240.0
              - select.set:
                  id: timer_direction
                  option: Count Down

        - if:
            condition:
              lambda: return !x.compare("Black Tea");
            then:
              - climate.control:
                  id: temperature_pid
                  target_temperature: 90.0
              - number.set:
                  id: timer_default_value
                  value: 180.0
              - select.set:
                  id: timer_direction
                  option: Count Down

        - if:
            condition:
              lambda: return !x.compare("Green Tea");
            then:
              - climate.control:
                  id: temperature_pid
                  target_temperature: 60.0
              - number.set:
                  id: timer_default_value
                  value: 180.0
              - select.set:
                  id: timer_direction
                  option: Count Down

